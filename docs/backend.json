{
  "entities": {
    "AmbulanceRequest": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "AmbulanceRequest",
      "type": "object",
      "description": "Represents a request for an ambulance service.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the ambulance request."
        },
        "userId": {
          "type": "string",
          "description": "Reference to User. (Relationship: User 1:N AmbulanceRequest). The ID of the user who submitted the request."
        },
        "animalType": {
          "type": "string",
          "description": "Type of animal needing assistance (e.g., dog, cat)."
        },
        "location": {
          "type": "string",
          "description": "Location where the animal needs assistance."
        },
        "description": {
          "type": "string",
          "description": "Description of the animal's condition and the situation."
        },
        "requestTime": {
          "type": "string",
          "description": "Timestamp of when the request was submitted.",
          "format": "date-time"
        },
        "status": {
          "type": "string",
          "description": "Current status of the request (e.g., pending, dispatched, completed)."
        }
      },
      "required": [
        "id",
        "userId",
        "animalType",
        "location",
        "description",
        "requestTime",
        "status"
      ]
    },
    "AdoptableAnimal": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "AdoptableAnimal",
      "type": "object",
      "description": "Represents an animal available for adoption.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the adoptable animal."
        },
        "name": {
          "type": "string",
          "description": "Name of the animal."
        },
        "species": {
          "type": "string",
          "description": "Species of the animal (e.g., dog, cat)."
        },
        "breed": {
          "type": "string",
          "description": "Breed of the animal."
        },
        "age": {
          "type": "number",
          "description": "Age of the animal in months."
        },
        "sex": {
          "type": "string",
          "description": "Sex of the animal (male/female)."
        },
        "description": {
          "type": "string",
          "description": "Description of the animal's personality and history."
        },
        "imageUrls": {
          "type": "array",
          "description": "Array of URLs pointing to images of the animal.",
          "items": {
            "type": "string"
          }
        },
        "isAdopted": {
          "type": "boolean",
          "description": "Indicates whether the animal has been adopted."
        }
      },
      "required": [
        "id",
        "name",
        "species",
        "breed",
        "age",
        "sex",
        "description",
        "imageUrls",
        "isAdopted"
      ]
    },
    "Volunteer": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Volunteer",
      "type": "object",
      "description": "Represents a volunteer who has signed up.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the volunteer."
        },
        "userId": {
          "type": "string",
          "description": "Reference to User. (Relationship: User 1:1 Volunteer). The ID of the associated user."
        },
        "name": {
          "type": "string",
          "description": "Name of the volunteer."
        },
        "email": {
          "type": "string",
          "description": "Email address of the volunteer.",
          "format": "email"
        },
        "phone": {
          "type": "string",
          "description": "Phone number of the volunteer."
        },
        "availability": {
          "type": "string",
          "description": "Volunteer's availability schedule."
        },
        "interests": {
          "type": "array",
          "description": "Areas of interest for volunteering.",
          "items": {
            "type": "string"
          }
        }
      },
      "required": [
        "id",
        "userId",
        "name",
        "email",
        "phone",
        "availability",
        "interests"
      ]
    },
    "ContactFormSubmission": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "ContactFormSubmission",
      "type": "object",
      "description": "Represents a submission from the contact form.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the contact form submission."
        },
        "name": {
          "type": "string",
          "description": "Name of the person submitting the form."
        },
        "email": {
          "type": "string",
          "description": "Email address of the submitter.",
          "format": "email"
        },
        "message": {
          "type": "string",
          "description": "Message content from the contact form."
        },
        "submissionTime": {
          "type": "string",
          "description": "Timestamp of when the form was submitted.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "name",
        "email",
        "message",
        "submissionTime"
      ]
    },
    "SuccessStory": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "SuccessStory",
      "type": "object",
      "description": "Represents a success story of an animal.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the success story."
        },
        "animalId": {
          "type": "string",
          "description": "Reference to AdoptableAnimal. (Relationship: AdoptableAnimal 1:N SuccessStory). The ID of the animal featured in the story."
        },
        "title": {
          "type": "string",
          "description": "Title of the success story."
        },
        "content": {
          "type": "string",
          "description": "Content of the success story."
        },
        "imageUrl": {
          "type": "string",
          "description": "URL pointing to an image associated with the story."
        },
        "datePublished": {
          "type": "string",
          "description": "Date when the success story was published.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "animalId",
        "title",
        "content",
        "imageUrl",
        "datePublished"
      ]
    },
    "AnimalDescriptionSuggestion": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "AnimalDescriptionSuggestion",
      "type": "object",
      "description": "Represents a suggested description for an animal, generated by AI.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the description suggestion."
        },
        "animalId": {
          "type": "string",
          "description": "Reference to AdoptableAnimal. (Relationship: AdoptableAnimal 1:N AnimalDescriptionSuggestion). The ID of the animal this suggestion is for."
        },
        "suggestedText": {
          "type": "string",
          "description": "The AI-generated descriptive text."
        },
        "isAccepted": {
          "type": "boolean",
          "description": "Indicates whether the suggested text was accepted by a user."
        },
        "suggestionTime": {
          "type": "string",
          "description": "Timestamp of when the suggestion was generated.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "animalId",
        "suggestedText",
        "isAccepted",
        "suggestionTime"
      ]
    },
    "Donation": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Donation",
      "type": "object",
      "description": "Represents a donation made by a user.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the donation."
        },
        "userId": {
          "type": "string",
          "description": "Reference to User. (Relationship: User 1:N Donation). The ID of the user who made the donation."
        },
        "amount": {
          "type": "number",
          "description": "Amount of the donation."
        },
        "paymentMethod": {
          "type": "string",
          "description": "Method of payment used for the donation (e.g., UPI, QR code)."
        },
        "transactionId": {
          "type": "string",
          "description": "Transaction ID from Razorpay."
        },
        "donationTime": {
          "type": "string",
          "description": "Timestamp of when the donation was made.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "userId",
        "amount",
        "paymentMethod",
        "transactionId",
        "donationTime"
      ]
    },
    "User": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User",
      "type": "object",
      "description": "Represents a user of the application.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the user."
        },
        "name": {
          "type": "string",
          "description": "Name of the user."
        },
        "email": {
          "type": "string",
          "description": "Email address of the user.",
          "format": "email"
        }
      },
      "required": [
        "id",
        "name",
        "email"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}",
        "definition": {
          "entityName": "User",
          "schema": {
            "$ref": "#/backend/entities/User"
          },
          "description": "Stores user profiles. Uses path-based ownership for simple access control.",
          "params": [
            {
              "name": "userId",
              "description": "The unique ID of the user."
            }
          ]
        }
      },
      {
        "path": "/users/{userId}/ambulance_requests/{requestId}",
        "definition": {
          "entityName": "AmbulanceRequest",
          "schema": {
            "$ref": "#/backend/entities/AmbulanceRequest"
          },
          "description": "Stores ambulance requests for each user. Uses path-based ownership. Contains the denormalized userId for authorization.",
          "params": [
            {
              "name": "userId",
              "description": "The unique ID of the user."
            },
            {
              "name": "requestId",
              "description": "The unique ID of the ambulance request."
            }
          ]
        }
      },
      {
        "path": "/adoptable_animals/{animalId}",
        "definition": {
          "entityName": "AdoptableAnimal",
          "schema": {
            "$ref": "#/backend/entities/AdoptableAnimal"
          },
          "description": "Stores information about adoptable animals. Allows for easy listing and querying.",
          "params": [
            {
              "name": "animalId",
              "description": "The unique ID of the adoptable animal."
            }
          ]
        }
      },
      {
        "path": "/volunteers/{volunteerId}",
        "definition": {
          "entityName": "Volunteer",
          "schema": {
            "$ref": "#/backend/entities/Volunteer"
          },
          "description": "Stores volunteer profiles. Allows for listing of all volunteers, while containing the userId for relation.",
          "params": [
            {
              "name": "volunteerId",
              "description": "The unique ID of the volunteer."
            }
          ]
        }
      },
      {
        "path": "/contact_form_submissions/{submissionId}",
        "definition": {
          "entityName": "ContactFormSubmission",
          "schema": {
            "$ref": "#/backend/entities/ContactFormSubmission"
          },
          "description": "Stores contact form submissions. Allows for easy management and review of submissions.",
          "params": [
            {
              "name": "submissionId",
              "description": "The unique ID of the contact form submission."
            }
          ]
        }
      },
      {
        "path": "/success_stories/{storyId}",
        "definition": {
          "entityName": "SuccessStory",
          "schema": {
            "$ref": "#/backend/entities/SuccessStory"
          },
          "description": "Stores success stories. Contains animalId to link stories to animals.",
          "params": [
            {
              "name": "storyId",
              "description": "The unique ID of the success story."
            }
          ]
        }
      },
      {
        "path": "/adoptable_animals/{animalId}/description_suggestions/{suggestionId}",
        "definition": {
          "entityName": "AnimalDescriptionSuggestion",
          "schema": {
            "$ref": "#/backend/entities/AnimalDescriptionSuggestion"
          },
          "description": "Stores animal description suggestions for each adoptable animal. Allows for easy retrieval of suggestions for a given animal.",
          "params": [
            {
              "name": "animalId",
              "description": "The unique ID of the adoptable animal."
            },
            {
              "name": "suggestionId",
              "description": "The unique ID of the description suggestion."
            }
          ]
        }
      },
      {
        "path": "/donations/{donationId}",
        "definition": {
          "entityName": "Donation",
          "schema": {
            "$ref": "#/backend/entities/Donation"
          },
          "description": "Stores donation information. Contains the userId to link each donation to a user.",
          "params": [
            {
              "name": "donationId",
              "description": "The unique ID of the donation."
            }
          ]
        }
      }
    ],
    "reasoning": "The Firestore structure is designed to ensure security, scalability, and ease of debugging, following the principles of Authorization Independence, Clarity of Intent, DBAC (Database-Based Access Control), and QAPs (Rules are not Filters). Authorization Independence is achieved through denormalization, copying relevant authorization data (such as user IDs) into subcollections to avoid using `get()` calls in security rules. Structural Segregation is applied by keeping data with different access needs in separate collections. Access Modeling uses path-based ownership for user-specific data and the membership map pattern for collaborative data where applicable.\n\nSpecifically:\n\n*   **Users:** User profiles are stored in `/users/{userId}` using path-based ownership.\n*   **Ambulance Requests:** Ambulance requests are stored under `/users/{userId}/ambulance_requests/{requestId}`. This path reflects the 1:N relationship and enforces that only the user can access their own requests.\n*   **Adoptable Animals:** Adoptable animals are stored in the `/adoptable_animals/{animalId}` collection. This allows for easy listing and querying of all adoptable animals.\n*   **Volunteers:** Volunteer profiles are stored in `/volunteers/{volunteerId}`, since the access needs are more global, or involve admin access. This also allows easier listing of all volunteers. The `userId` is stored within the document to link to the associated user.\n*   **Contact Form Submissions:** Contact form submissions are stored in `/contact_form_submissions/{submissionId}`. This allows for easy management and review of all submissions by authorized personnel.\n*   **Success Stories:** Success stories are stored in `/success_stories/{storyId}`. The `animalId` field links each story to the corresponding adoptable animal.\n*   **Animal Description Suggestions:** Animal description suggestions are stored under `/adoptable_animals/{animalId}/description_suggestions/{suggestionId}`.  This reflects the relationship and allows for easy retrieval of suggestions for a given animal.\n*   **Donations:** Donations are stored in `/donations/{donationId}` collection. The `userId` field links each donation to the user who made it."
  }
}